<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>rCharts with d3-grid</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/png" href="favicon.ico">
  <style>
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
  </style>
  
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-responsive.no-icons.min.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="/css/bootstrap.min.css"> -->
<link  rel="stylesheet" 
    href="http://netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css">
  <link rel="stylesheet" href="libraries/frameworks/bootstrap/css/bootstrap-responsive.min.css">
  
  <link rel="stylesheet" href="libraries/frameworks/bootstrap/css/main.css">
  <link rel="stylesheet" href="libraries/highlighters/prettify/css/twitter-bootstrap.css" />
  <script src="libraries/frameworks/bootstrap/js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/frameworks/bootstrap/js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    
  <script src="libraries/widgets/d3grid/js\d3.v3.js"></script>
<script src="libraries/widgets/d3grid/js\d3-grid.js"></script>
<script src="libraries/widgets/d3grid/js\d3-comparator.js"></script>

</head>
<body>
   <!--[if lt IE 7]>
     <p class="chromeframe">You are using an outdated browser. 
       <a href="http://browsehappy.com/">Upgrade your browser today</a> or 
       <a href="http://www.google.com/chromeframe/?redirect=true"> 
         install Google Chrome Frame
       </a> to better experience this site.
    </p>
   <![endif]-->
   <!-- Ref: http://twitter.github.com/bootstrap/examples/hero.html -->
   <div id = "container">
    <div id = "content" class="row-fluid">
      
<p><div class = "span2 sidebar">
  <h3>rCharts and d3-grid</h3>
  An early experiment with <a href="https://github.com/interactivethings/d3-grid">d3-grid</a> motivated by <a href="http://bl.ocks.org/herrstucki">Herr Stucki</a>.  I would like to make some of the d3-grid capabilities available through rCharts primarily for use in small multiples or lattice-like strips.  Since I am having trouble deciding what to provide with an rCharts implementation, I wanted to replicate each of Stucki&#39;s three examples.  But before that, I wanted to just draw a table like layout with each of the cells colored based on their location.<br/><br/>
  </div>
  <div class = "span5 main"></p>

<pre><code class="r">require(rCharts)

grid1 &lt;- rCharts$new()
grid1$field(&quot;lib&quot;, &quot;libraries/widgets/d3grid&quot;)

grid1$set(height = 500, width = 960, container = &quot;.rChart&quot;, size = 400, nrow = 8, 
    ncol = 8, bands = TRUE, data = 1:64)
grid1$print()
</code></pre>

<div id='chart320c60b459bd' class='rChart d3grid'></div>

<script>
//get parameters from rCharts
var params = {
 "dom": "chart320c60b459bd",
"width":    960,
"height":    500,
"container": ".rChart",
"size":    400,
"nrow":      8,
"ncol":      8,
"bands": true,
"data": [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64 ],
"id": "chart320c60b459bd" 
}

var width = params.width,
    height = params.height;

var grid = d3.layout.grid()
  .rows( params.nrow )
  .cols( params.ncol )
  .size([ params.size, params.size]);

if (params.bands == true) {
    grid.bands();
} else {
    grid.points();
}
    
var svg = d3.select(params.container).append("svg")
  .attr({
    width: width,
    height: height
  });

var svgGrid = svg.append("g")
  .attr("transform", "translate(100,50)");

var cells = svgGrid.selectAll("g")
  .data(grid(d3.entries(params.data.map(function(d,i) { return [d]; }))))  //thanks http://stackoverflow.com/questions/3751520/how-to-generate-sequence-of-numbers-chars-in-javascript
    .enter()
      .append("g")
        .attr("class", "cell")
        .attr("id", function(d) { return +d.key;})
        .attr("transform", function(d, i) {
           return "translate(" + d.x + "," + d.y + ")"
         });

</script>

<script>
  var color = d3.scale.linear()
    .domain([0, 32, 63])
    .range(["red", "lightgray", "green"]);
  //thanks again http://stackoverflow.com/questions/3751520/how-to-generate-sequence-of-numbers-chars-in-javascript
  cells.selectAll("rect")
    .data(function(d) {return d.value})
      .enter().append("rect")
        .attr("width", grid.nodeSize()[0])
        .attr("height", grid.nodeSize()[1])
        .style("fill", function(d) {return color(d)});
</script>

<p></div>
</div></p>

    </div>
   </div>
</body>
  <script src="libraries/frameworks/bootstrap/js/vendor/bootstrap.min.js"></script>
  <script src="libraries/frameworks/bootstrap/js/plugins.js"></script>
  <script src="libraries/frameworks/bootstrap/js/main.js"></script>
  <!-- Load Javascripts for Widgets -->
  
  <!-- Google Prettify -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
  <script src='libraries/highlighters/prettify/js/lang-r.js'></script>
  <script>
    var pres = document.getElementsByTagName("pre");
    for (var i=0; i < pres.length; ++i) {
      pres[i].className = "prettyprint linenums";
    }
    prettyPrint();
  </script>
  <!-- End Google Prettify --> 
  </html>